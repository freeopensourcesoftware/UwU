do local Win11={};local config={accentColor=Color3.fromRGB(0,120,212),backgroundColor=Color3.fromRGB(243,243,243),taskbarColor=Color3.fromRGB(240,240,240),windowColor=Color3.fromRGB(255,255,255),textColor=Color3.fromRGB(0,0,0),cornerRadius=UDim.new(0,8),taskbarHeight=48,titleBarHeight=32,windowMinWidth=300,windowMinHeight=200,taskbarIconSize=36,startButtonWidth=48};Win11.Create=function(self) local screenGui=Instance.new("ScreenGui");screenGui.Name="Windows11GUI";screenGui.ResetOnSpawn=false;screenGui.ZIndexBehavior=Enum.ZIndexBehavior.Sibling;local desktop=Instance.new("Frame");desktop.Name="Desktop";desktop.Size=UDim2.fromScale(1,1);desktop.BackgroundColor3=config.backgroundColor;desktop.Parent=screenGui;local taskbar=Instance.new("Frame");taskbar.Name="Taskbar";taskbar.Size=UDim2.new(1,0,0,config.taskbarHeight);taskbar.Position=UDim2.new(0,0,1, -config.taskbarHeight);taskbar.BackgroundColor3=config.taskbarColor;taskbar.BorderSizePixel=0;taskbar.ZIndex=100;local taskbarShadow=Instance.new("Frame");taskbarShadow.Name="Shadow";taskbarShadow.Size=UDim2.new(1,0,0,5);taskbarShadow.Position=UDim2.new(0,0,0, -5);taskbarShadow.BackgroundTransparency=0.5;taskbarShadow.BackgroundColor3=Color3.fromRGB(0,0,0);taskbarShadow.BorderSizePixel=0;taskbarShadow.ZIndex=99;taskbarShadow.Parent=taskbar;local startButton=Instance.new("ImageButton");startButton.Name="StartButton";startButton.Size=UDim2.new(0,config.startButtonWidth,1,0);startButton.Position=UDim2.new(0,0,0,0);startButton.BackgroundTransparency=1;startButton.Image="rbxassetid://109420888218907";startButton.Parent=taskbar;local taskArea=Instance.new("Frame");taskArea.Name="TaskArea";taskArea.Size=UDim2.new(1, -config.startButtonWidth,1,0);taskArea.Position=UDim2.new(0,config.startButtonWidth,0,0);taskArea.BackgroundTransparency=1;taskArea.Parent=taskbar;local startMenu=Instance.new("Frame");startMenu.Name="StartMenu";startMenu.Size=UDim2.new(0,550,0,600);startMenu.Position=UDim2.new(0,0,0, -600);startMenu.BackgroundColor3=config.windowColor;startMenu.BorderSizePixel=0;startMenu.Visible=false;startMenu.ZIndex=101;local startMenuCorner=Instance.new("UICorner");startMenuCorner.CornerRadius=config.cornerRadius;startMenuCorner.Parent=startMenu;startButton.MouseButton1Click:Connect(function() startMenu.Visible= not startMenu.Visible;end);startMenu.Parent=screenGui;taskbar.Parent=screenGui;self.screenGui=screenGui;self.desktop=desktop;self.taskbar=taskbar;self.startMenu=startMenu;self.windows={};self.nextWindowPos={x=20,y=20};self:InitializeSystemTray();self:PopulateStartMenu();return screenGui;end;Win11.CreateWindow=function(self,title,width,height) width=width or 600 ;height=height or 400 ;width=math.max(width,config.windowMinWidth);height=math.max(height,config.windowMinHeight);local window={};local frame=Instance.new("Frame");frame.Name="Window_"   .. title ;frame.Size=UDim2.fromOffset(width,height);frame.Position=UDim2.fromOffset(self.nextWindowPos.x,self.nextWindowPos.y);frame.BackgroundColor3=config.windowColor;frame.BorderSizePixel=0;frame.ZIndex=10;frame.Parent=self.desktop;local corner=Instance.new("UICorner");corner.CornerRadius=config.cornerRadius;corner.Parent=frame;local shadow=Instance.new("Frame");shadow.Name="Shadow";shadow.Size=UDim2.new(1,10,1,10);shadow.Position=UDim2.new(0, -5,0, -5);shadow.BackgroundTransparency=0.8;shadow.BackgroundColor3=Color3.fromRGB(0,0,0);shadow.BorderSizePixel=0;shadow.ZIndex=9;local shadowCorner=Instance.new("UICorner");shadowCorner.CornerRadius=UDim.new(0,12);shadowCorner.Parent=shadow;shadow.Parent=frame;local titleBar=Instance.new("Frame");titleBar.Name="TitleBar";titleBar.Size=UDim2.new(1,0,0,config.titleBarHeight);titleBar.BackgroundColor3=config.windowColor;titleBar.BorderSizePixel=0;titleBar.ZIndex=11;local titleCorner=Instance.new("UICorner");titleCorner.CornerRadius=config.cornerRadius;titleCorner.Parent=titleBar;local titleText=Instance.new("TextLabel");titleText.Name="Title";titleText.Text=title;titleText.Size=UDim2.new(1, -100,1,0);titleText.Position=UDim2.new(0,10,0,0);titleText.BackgroundTransparency=1;titleText.TextColor3=config.textColor;titleText.Font=Enum.Font.SourceSansSemibold;titleText.TextSize=16;titleText.TextXAlignment=Enum.TextXAlignment.Left;titleText.ZIndex=12;titleText.Parent=titleBar;local controls=Instance.new("Frame");controls.Name="Controls";controls.Size=UDim2.new(0,90,1,0);controls.Position=UDim2.new(1, -90,0,0);controls.BackgroundTransparency=1;controls.ZIndex=12;local closeBtn=Instance.new("TextButton");closeBtn.Name="CloseButton";closeBtn.Text="✕";closeBtn.Size=UDim2.new(0,30,0,30);closeBtn.Position=UDim2.new(1, -30,0,0);closeBtn.BackgroundColor3=Color3.fromRGB(255,0,0);closeBtn.BackgroundTransparency=1;closeBtn.TextColor3=config.textColor;closeBtn.TextSize=16;closeBtn.ZIndex=13;closeBtn.Font=Enum.Font.SourceSans;local maxBtn=Instance.new("TextButton");maxBtn.Name="MaximizeButton";maxBtn.Text="□";maxBtn.Size=UDim2.new(0,30,0,30);maxBtn.Position=UDim2.new(1, -60,0,0);maxBtn.BackgroundTransparency=1;maxBtn.TextColor3=config.textColor;maxBtn.TextSize=16;maxBtn.ZIndex=13;maxBtn.Font=Enum.Font.SourceSans;local minBtn=Instance.new("TextButton");minBtn.Name="MinimizeButton";minBtn.Text="—";minBtn.Size=UDim2.new(0,30,0,30);minBtn.Position=UDim2.new(1, -90,0,0);minBtn.BackgroundTransparency=1;minBtn.TextColor3=config.textColor;minBtn.TextSize=16;minBtn.ZIndex=13;minBtn.Font=Enum.Font.SourceSans;closeBtn.Parent=controls;maxBtn.Parent=controls;minBtn.Parent=controls;controls.Parent=titleBar;titleBar.Parent=frame;local contentArea=Instance.new("Frame");contentArea.Name="ContentArea";contentArea.Size=UDim2.new(1,0,1, -config.titleBarHeight);contentArea.Position=UDim2.new(0,0,0,config.titleBarHeight);contentArea.BackgroundColor3=config.windowColor;contentArea.BorderSizePixel=0;contentArea.ZIndex=11;contentArea.ClipsDescendants=true;contentArea.Parent=frame;local isDragging=false;local dragStart=nil;local startPos=nil;titleBar.InputBegan:Connect(function(input) if (input.UserInputType==Enum.UserInputType.MouseButton1) then isDragging=true;dragStart=input.Position;startPos=frame.Position;self:BringToFront(window);end end);titleBar.InputEnded:Connect(function(input) if (input.UserInputType==Enum.UserInputType.MouseButton1) then isDragging=false;end end);titleBar.InputChanged:Connect(function(input) if (isDragging and (input.UserInputType==Enum.UserInputType.MouseMovement)) then local delta=input.Position-dragStart ;frame.Position=UDim2.new(startPos.X.Scale,startPos.X.Offset + delta.X ,startPos.Y.Scale,startPos.Y.Offset + delta.Y );end end);closeBtn.MouseButton1Click:Connect(function() frame:Destroy();local index=table.find(self.windows,window);if index then table.remove(self.windows,index);end end);local isMaximized=false;local originalSize,originalPos;maxBtn.MouseButton1Click:Connect(function() if isMaximized then frame.Size=originalSize;frame.Position=originalPos;isMaximized=false;else originalSize=frame.Size;originalPos=frame.Position;frame.Size=UDim2.new(1,0,1, -config.taskbarHeight);frame.Position=UDim2.new(0,0,0,0);isMaximized=true;end end);minBtn.MouseButton1Click:Connect(function() frame.Visible=false;local restoreBtn=Instance.new("ImageButton");restoreBtn.Name=title   .. "Restore" ;restoreBtn.Size=UDim2.new(0,config.taskbarIconSize,0,config.taskbarIconSize);restoreBtn.Position=UDim2.new(0, #self.windows * (config.taskbarIconSize + 5) ,0.5, -config.taskbarIconSize/2 );restoreBtn.BackgroundColor3=config.accentColor;restoreBtn.BorderSizePixel=0;local restoreCorner=Instance.new("UICorner");restoreCorner.CornerRadius=UDim.new(0,4);restoreCorner.Parent=restoreBtn;local restoreLabel=Instance.new("TextLabel");restoreLabel.Size=UDim2.new(1,0,1,0);restoreLabel.BackgroundTransparency=1;restoreLabel.Text=string.sub(title,1,1);restoreLabel.TextColor3=Color3.fromRGB(255,255,255);restoreLabel.Font=Enum.Font.SourceSansBold;restoreLabel.TextSize=18;restoreLabel.Parent=restoreBtn;restoreBtn.Parent=self.taskbar.TaskArea;restoreBtn.MouseButton1Click:Connect(function() frame.Visible=true;self:BringToFront(window);restoreBtn:Destroy();end);end);window.frame=frame;window.contentArea=contentArea;window.titleBar=titleBar;window.SetTitle=function(self,newTitle) titleText.Text=newTitle;frame.Name="Window_"   .. newTitle ;end;window.AddContent=function(self,content) content.Parent=contentArea;return content;end;self.nextWindowPos.x=(self.nextWindowPos.x + 30)%300 ;self.nextWindowPos.y=(self.nextWindowPos.y + 30)%200 ;table.insert(self.windows,window);return window;end;Win11.BringToFront=function(self,window) local highestZ=10;for _,win in ipairs(self.windows) do if (win.frame.ZIndex>highestZ) then highestZ=win.frame.ZIndex;end end window.frame.ZIndex=highestZ + 2 ;window.frame.Shadow.ZIndex=highestZ + 1 ;window.titleBar.ZIndex=highestZ + 3 ;window.contentArea.ZIndex=highestZ + 3 ;end;Win11.InitializeSystemTray=function(self) local tray=Instance.new("Frame");tray.Name="SystemTray";tray.Size=UDim2.new(0,150,1,0);tray.Position=UDim2.new(1, -150,0,0);tray.BackgroundTransparency=1;local clock=Instance.new("TextLabel");clock.Name="Clock";clock.Size=UDim2.new(0,80,1,0);clock.Position=UDim2.new(1, -80,0,0);clock.BackgroundTransparency=1;clock.Text="12:00 PM";clock.TextColor3=config.textColor;clock.Font=Enum.Font.SourceSans;clock.TextSize=14;clock.Parent=tray;spawn(function() while true do local date=os.date("*t");local hour=date.hour;local am=hour<12 ;if (hour>12) then hour=hour-12 ;end if (hour==0) then hour=12;end local timeString=string.format("%d:%02d %s",hour,date.min,(am and "AM") or "PM" );clock.Text=timeString;wait(10);end end);tray.Parent=self.taskbar;end;Win11.PopulateStartMenu=function(self) local searchBar=Instance.new("Frame");searchBar.Name="SearchBar";searchBar.Size=UDim2.new(1, -40,0,40);searchBar.Position=UDim2.new(0,20,0,20);searchBar.BackgroundColor3=Color3.fromRGB(230,230,230);searchBar.BorderSizePixel=0;local searchCorner=Instance.new("UICorner");searchCorner.CornerRadius=UDim.new(0,20);searchCorner.Parent=searchBar;local searchIcon=Instance.new("TextLabel");searchIcon.Size=UDim2.new(0,40,1,0);searchIcon.BackgroundTransparency=1;searchIcon.Text="🔍";searchIcon.TextSize=20;searchIcon.TextColor3=Color3.fromRGB(100,100,100);searchIcon.Font=Enum.Font.SourceSans;searchIcon.Parent=searchBar;local searchText=Instance.new("TextBox");searchText.Size=UDim2.new(1, -50,1,0);searchText.Position=UDim2.new(0,40,0,0);searchText.BackgroundTransparency=1;searchText.Text="";searchText.PlaceholderText="Search";searchText.TextSize=16;searchText.TextColor3=config.textColor;searchText.TextXAlignment=Enum.TextXAlignment.Left;searchText.Font=Enum.Font.SourceSans;searchText.Parent=searchBar;local pinnedApps=Instance.new("Frame");pinnedApps.Name="PinnedApps";pinnedApps.Size=UDim2.new(1, -40,0,300);pinnedApps.Position=UDim2.new(0,20,0,80);pinnedApps.BackgroundTransparency=1;local pinnedTitle=Instance.new("TextLabel");pinnedTitle.Size=UDim2.new(1,0,0,30);pinnedTitle.BackgroundTransparency=1;pinnedTitle.Text="Pinned";pinnedTitle.TextColor3=config.textColor;pinnedTitle.TextSize=18;pinnedTitle.Font=Enum.Font.SourceSansSemibold;pinnedTitle.TextXAlignment=Enum.TextXAlignment.Left;pinnedTitle.Parent=pinnedApps;local appsGrid=Instance.new("Frame");appsGrid.Name="AppsGrid";appsGrid.Size=UDim2.new(1,0,1, -30);appsGrid.Position=UDim2.new(0,0,0,30);appsGrid.BackgroundTransparency=1;appsGrid.Parent=pinnedApps;local appNames={"Files","Photos","Settings","Store","Mail","Calendar","Calculator"};for i,name in ipairs(appNames) do local row=math.floor((i-1)/3 );local col=(i-1)%3 ;local app=Instance.new("Frame");app.Name=name;app.Size=UDim2.new(0,100,0,100);app.Position=UDim2.new(0,col * 110 ,0,row * 110 );app.BackgroundColor3=config.accentColor;app.BorderSizePixel=0;local appCorner=Instance.new("UICorner");appCorner.CornerRadius=UDim.new(0,8);appCorner.Parent=app;local appLabel=Instance.new("TextLabel");appLabel.Size=UDim2.new(1,0,0,20);appLabel.Position=UDim2.new(0,0,1, -20);appLabel.BackgroundTransparency=1;appLabel.Text=name;appLabel.TextColor3=Color3.fromRGB(255,255,255);appLabel.Font=Enum.Font.SourceSans;appLabel.TextSize=14;appLabel.Parent=app;local appButton=Instance.new("TextButton");appButton.Size=UDim2.new(1,0,1,0);appButton.BackgroundTransparency=1;appButton.Text="";appButton.Parent=app;appButton.MouseButton1Click:Connect(function() self:CreateWindow(name,600,400);self.startMenu.Visible=false;end);app.Parent=appsGrid;end searchBar.Parent=self.startMenu;pinnedApps.Parent=self.startMenu;end;return Win11; end
